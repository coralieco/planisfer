<div class="page-banner text-center">
  <div class="page-banner-title">
    <div class = "col-md-12 title-col">
      <span> <%= link_to root_path do %>
        <%= image_tag "blue_logo_no_word.png", class: "logo"%>
      <% end %> </span>
      <span class ="brand-name">Planisfer</span>
      <span class = "banner2-title">Explore <%= @region.name %> your own way!</span> <span class = "banner2-title">Let's choose your car </span>
    </div>
  </div>
  <span class = "booking-status">
    <%= render 'shared/booking_status', :status => 3 %>
  </span>
</div>


<div class="container-fluid page-result">

  <div class="col-xs-12 col-md-8 car-left-padding">
    <div id = "car-zone" class = "<%= 'recap-opacity' if @recap_opacity == 0 %>">

      <div class = "row">
        <div class = "col-xs-12">
          <div id = "main-car-container" class = "center-block">
            <div class = "car-page-title text-center">
              <h3> <%= @main_car_title %> </h3>
            </div>

            <h5 id = "car-recap-text"> <%= @main_car_airports_titles[0] %> - <%= Time.parse(@pick_up_date_time).strftime('%b %d') %>  <span class="fa fa-long-arrow-right car-selection-arrow" aria-hidden="true"></span> <%= @main_car_airports_titles[1] %> - <%= Time.parse(@drop_off_date_time).strftime('%b %d') %>
            </h5>


            <%= link_to trip_path(@trip, @options.merge({:car_rental_id =>@main_car})), method: :put, class: 'tabLink result-card' do %>
              <div class = "row recommendation-box selected">
                <div class = "col-md-6 no-relative-position">
                  <h4> <%= @main_car.car.name %> <span>or similar</span></h4>
                  <ul>
                    <li> Rented by <%= @main_car.company %>, a well established rental company in Europe</li>
                    <li> <%= @main_car.car.category %> category</li>
                    <li> € <%= (@main_car.price.to_f.fdiv(@nb_days)).ceil %> per day </li>
                  </ul>
                  <div id = "recommended_car_price" class = "selected"> <%= money_without_cents_and_with_symbol(@main_car.price) %>
                  </div>
                </div>
                <div class = "col-md-6 text-center no-padding">
                  <div class = "main-photo-container">
                    <div class = "card-background main-background <%= @main_car.car.category.downcase%>-background">
                    </div>
                  </div>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <div class = "row">
        <div class = "car-page-title text-center">
          <h3>OTHER CARS, RANKED BY CATEGORY </h3>
        </div>
      </div>

      <div class = "row">
        <%= render "car_form" %>
      </div>

      <div class = "row">
        <div id = "car-cards-partial">
          <%= render "car_cards" %>
        </div>
      </div>

      <div class = "row">
        <%= link_to "javascript:showhide('modify')", class: "modify-search-link" do%>
          <h5 class="<%= 'hidden' if @status == 'modify' %>" id="modify-search"> Change search criteria </h5>
        <% end  %>
      </div>

    </div>
  </div>

  <div class="col-xs-12 col-md-4">
    <div id = "recap-zone" class = "<%= 'recap-opacity' if @recap_opacity == 1 %>">
      <%= render "shared/recap"%>
    </div>
  </div>

</div>


<% # début du wrapper %>
<div class = "card-wrapper">
  <% # début du container %>
  <div class="container-fluid">

    <div class="row">
      <% # Début case bootstrap formulaire et cards %>
      <div class="col-xs-12 col-sm-8">

        <div class = "row">

        </div>

      </div>
      <% # Fin de la case bootstrap pour les formulaires et cards %>


      <% # Début case bootstrap Carnet de voyage %>

      <% #Fin case bootstrap Carnet de voyage  %>

    </div>
    <% # Find de la row %>

  </div>
  <% # Find du container %>
</div>
 <% # Find du wrapper %>



<% content_for(:after_js) do %>

  <script>
    $(document).ready(function() {
      $('.card').mouseenter(function(e) {
        e.preventDefault();
        $('.card.selected').removeClass('selected');
        $(this).addClass('selected');
      })
    });

    $(document).ready(function() {
      $('#recap-zone').mouseenter(function(e) {
        e.preventDefault();
        $(this).removeClass('recap-opacity');
        $('#car-zone').addClass('recap-opacity');
      })
      $('#recap-zone').mouseleave(function(e) {
        e.preventDefault();
        $('#car-zone').removeClass('recap-opacity');
        $(this).addClass('recap-opacity');
      })
    });

  </script>

  <script>
    $(document).ready(function() {
      $('#pick_up_date').datepicker({
        todayHighlight: true,
        orientation: "bottom-left",
        autoclose: true,
        format: 'MM dd',
      });
      $('#drop_off_date').datepicker({
        todayHighlight: true,
        orientation: "bottom-left",
        autoclose: true,
        format: 'MM dd',
      });
    });
  </script>

<script>
  $(function () {
    $('#datetimepicker').datetimepicker({
        format: 'MMM DD [-] hh a',
        sideBySide: true
    });
    $('#datetimepicker2').datetimepicker({
        format: 'MMM DD [-] hh a',
        sideBySide: true
    });
  });
  function showhide(id) {
    var e = document.getElementById(id);
    if ($('#' + e.id).hasClass('not-displayed')) {
      $('#' + e.id).slideDown('slow');
      $('#' + e.id).removeClass('not-displayed')
      // $("#see-filters").addClass("hidden");
      // $("#hide-filters").removeClass("hidden");
    } else {
      $('#' + e.id).slideUp('slow');
      $('#' + e.id).addClass('not-displayed')
      // $("#see-filters").removeClass("hidden");
      // $("#hide-filters").addClass("hidden");
    };
  };
</script>

<% end %>
