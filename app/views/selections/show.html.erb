<div class="page-banner text-center">
  <div class="page-banner-title">
    <div class = "col-md-12 title-col">
      <span> <%= link_to root_path do %>
        <%= image_tag "blue_logo_no_word.png", class: "logo"%>
      <% end %> </span>
      <span class ="brand-name">Planisfer</span>
      <span class = "banner2-title">Explore <%= @region.name %> your own way!</span> <span class = "banner2-title">Let's choose your car </span>
    </div>
  </div>
  <span class = "booking-status">
    <%= render 'shared/booking_status', :status => 3 %>
  </span>
</div>


<div class="container-fluid page-result">

  <div class="col-xs-12 col-md-8 car-left-padding <%= 'recap-opacity' if @recap_opacity == 0 %>">

    <div class = "row">
      <div class = "car-page-title text-center">
        <h3> OUR RECOMMENDATION </h3>
      </div>
    </div>
    <%= link_to trip_path(@trip, @options.merge({:car_rental_id =>@recommended_car})), method: :put, class: 'tabLink result-card' do %>
      <div class = "row recommendation-box selected">
        <div class = "col-md-4">
          <h4> <%= @recommended_car.car.name %> <span>or similar</span></h4>
          <ul>
            <li> Rented by <%= @recommended_car.company %>, a well established rental company in Europe</li>
            <li> <%= @recommended_car.car.category %> category</li>
            <li> € <%= (@recommended_car.price.to_f.fdiv(@nb_days)).ceil %> per day </li>
          </ul>
        </div>
        <div class = "col-md-8 text-center">
          <div class = "price-and-photo">
            <span id = "recommended_car_price" class = "selected"> <%= money_without_cents_and_with_symbol(@recommended_car.price) %></span>
            <div> <%= image_tag @recommended_car.car.image_url %></div>
          </div>

        </div>
      </div>
    <% end %>

    <div class = "row">
      <div class = "car-page-title text-center">
        <h3>OTHER CARS, RANKED BY CATEGORY </h3>
     <!--<h5 id = "car-recap-text"> <%= @pick_up_airport.cityname%> <%= @pick_up_airport.name%> - <%= Time.parse(@pick_up_date_time).strftime('%b %d') %>  <span class="fa fa-long-arrow-right car-selection-arrow" aria-hidden="true"></span> <%= @drop_off_airport.cityname%> <%= @drop_off_airport.name %> - <%= Time.parse(@drop_off_date_time).strftime('%b %d') %> -->
          <span>
            <%= link_to "javascript:showhide('modify')", class: "modify-search-link", id: "car-modify-link" do%>
              <span class="<%= 'hidden' if @status == 'modify' %>" id="modify-search"> Change search criteria </span>
            <% end  %>
          </span>
  <!--       </h5> -->

      </div>
    </div>

    <div class = "row">
      <%= render "car_form" %>
    </div>

    <div class = "row">
      <div id = "car-cards-partial">
        <%= render "car_cards" %>
      </div>
    </div>

  </div>

  <div class="col-xs-12 col-md-4">
    <div id = "recap-zone">
      <%= render "shared/recap", :opacity => @recap_opacity %>
    </div>
  </div>

</div>


<% # début du wrapper %>
<div class = "card-wrapper">
  <% # début du container %>
  <div class="container-fluid">

    <div class="row">
      <% # Début case bootstrap formulaire et cards %>
      <div class="col-xs-12 col-sm-8">

        <div class = "row">

        </div>

      </div>
      <% # Fin de la case bootstrap pour les formulaires et cards %>


      <% # Début case bootstrap Carnet de voyage %>

      <% #Fin case bootstrap Carnet de voyage  %>

    </div>
    <% # Find de la row %>

  </div>
  <% # Find du container %>
</div>
 <% # Find du wrapper %>



<% content_for(:after_js) do %>

  <script>
    $(document).ready(function() {
      $('.card').mouseover('click', function(e) {
        e.preventDefault();
        $('.card.selected').removeClass('selected');
        $(this).addClass('selected');
      })
    });

    $(document).ready(function() {
      $('#recap-zone').mouseover('click', function(e) {
        e.preventDefault();
        $(this).children().removeClass('recap-opacity');
        $('.car-left-padding').addClass('recap-opacity');
        console.log('test')
      })
      $('#recap-zone').mouseleave('click', function(e) {
        e.preventDefault();
        $(this).children().addClass('recap-opacity');
        $('.car-left-padding').removeClass('recap-opacity');
        console.log('test')
      })
    });

  </script>

  <script>
    $(document).ready(function() {
      $('#pick_up_date').datepicker({
        todayHighlight: true,
        orientation: "bottom-left",
        autoclose: true,
        format: 'MM dd',
      });
      $('#drop_off_date').datepicker({
        todayHighlight: true,
        orientation: "bottom-left",
        autoclose: true,
        format: 'MM dd',
      });
    });
  </script>

<script>
  $(function () {
    $('#datetimepicker').datetimepicker({
        format: 'MMM DD [-] hh a',
        sideBySide: true
    });
    $('#datetimepicker2').datetimepicker({
        format: 'MMM DD [-] hh a',
        sideBySide: true
    });
  });
  function showhide(id) {
    var e = document.getElementById(id);
    if ($('#' + e.id).hasClass('not-displayed')) {
      $('#' + e.id).slideDown('slow');
      $('#' + e.id).removeClass('not-displayed')
      // $("#see-filters").addClass("hidden");
      // $("#hide-filters").removeClass("hidden");
    } else {
      $('#' + e.id).slideUp('slow');
      $('#' + e.id).addClass('not-displayed')
      // $("#see-filters").removeClass("hidden");
      // $("#hide-filters").addClass("hidden");
    };
  };
</script>

<% end %>
